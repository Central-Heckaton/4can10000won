{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// rateStars.jsx\nimport React from'react';import styles from'./rateStars.module.css';import{useState,useEffect}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RateStars=function RateStars(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),starClick=_useState2[0],setStarClick=_useState2[1];var _useState3=useState(starClick),_useState4=_slicedToArray(_useState3,2),preClicked=_useState4[0],setPreClicked=_useState4[1];var _useState5=useState(props.id),_useState6=_slicedToArray(_useState5,2),beerId=_useState6[0],setBeerId=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),content=_useState8[0],setContent=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),point=_useState10[0],setPoint=_useState10[1];var navigate=useNavigate();var resetInput=function resetInput(){setStarClick(null);setPreClicked(starClick);setBeerId(props.id);setContent(\"\");setPoint(0);[1,2,3,4,5].map(function(i){document.getElementById(i).src=\"/img/star-regular.png\";});};var handleInputClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var request_data,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:document.getElementById('input').value='';request_data={beerId:beerId,content:content,point:point};_context.prev=2;_context.next=5;return axios({method:\"post\",url:\"/api/comments/write-comment\",headers:{\"Content-Type\":\"application/json\"},data:JSON.stringify(request_data)});case 5:response=_context.sent;if(response.status>=200&&response.status<300){alert(\"댓글 작성이 완료 되었습니다.\");navigate(\"/review\",{state:{id:props.id}});}_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);// alert(err);\nconsole.log(_context.t0);resetInput();case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function handleInputClick(_x){return _ref.apply(this,arguments);};}();var goToFetch=function goToFetch(e){e.preventDefault();var nowClicked=e.target.id;setStarClick(nowClicked);setPoint(nowClicked);if(nowClicked!==null){if(nowClicked>preClicked){for(var i=1;i<=nowClicked;i++){var star_id=document.getElementById(i);star_id.src=\"/img/star.png\";}}else if(nowClicked<preClicked){for(var _i=1;_i<=nowClicked;_i++){var _star_id=document.getElementById(_i);_star_id.src=\"/img/star.png\";}for(var j=5;j>nowClicked;j--){var _star_id2=document.getElementById(j);_star_id2.src=\"/img/star-regular.png\";}}else{for(var _i2=1;_i2<=nowClicked;_i2++){var _star_id3=document.getElementById(_i2);_star_id3.src=\"/img/star-regular.png\";}}}};useEffect(function(){setPreClicked(starClick);});return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.btnContainer,children:/*#__PURE__*/_jsx(\"button\",{className:styles.button,children:\"\\uB9AC\\uBDF0 \\uC791\\uC131\"})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.starContainer,children:[/*#__PURE__*/_jsx(\"p\",{className:styles.total,children:\"\\uCD1D\\uC810\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.rate,children:[1,2,3,4,5].map(function(el){return/*#__PURE__*/_jsx(\"img\",{id:el,className:styles.star,src:\"/img/star-regular.png\",alt:\"\",onClick:goToFetch},el);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.footer,children:[/*#__PURE__*/_jsx(\"textarea\",{id:\"input\",className:styles.input,type:\"text\",value:content,placeholder:\"\\uB9E5\\uC8FC \\uD3C9\\uAC00\\uAE00\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",onChange:function onChange(e){return setContent(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:styles.register,type:\"button\",value:\"\\uB4F1\\uB85D\",onClick:handleInputClick})]})]});};export default RateStars;","map":{"version":3,"names":["React","styles","useState","useEffect","axios","useNavigate","RateStars","props","starClick","setStarClick","preClicked","setPreClicked","id","beerId","setBeerId","content","setContent","point","setPoint","navigate","resetInput","map","i","document","getElementById","src","handleInputClick","e","value","request_data","method","url","headers","data","JSON","stringify","response","status","alert","state","console","log","goToFetch","preventDefault","nowClicked","target","star_id","j","container","btnContainer","button","starContainer","total","rate","el","star","footer","input","register"],"sources":["C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/src/components/rateStars/rateStars.jsx"],"sourcesContent":["// rateStars.jsx\r\nimport React from 'react';\r\nimport styles from './rateStars.module.css';\r\nimport { useState, useEffect } from 'react';\r\nimport  axios  from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst RateStars = (props) => {\r\n    const [starClick, setStarClick] = useState(null);\r\n    const [preClicked, setPreClicked] = useState(starClick);\r\n    \r\n    const [beerId, setBeerId] = useState(props.id);\r\n    const [content, setContent] = useState(\"\");\r\n    const [point, setPoint] = useState(0);\r\n\r\n    let navigate = useNavigate();\r\n\r\n    const resetInput = () => {\r\n        setStarClick(null);\r\n        setPreClicked(starClick);\r\n        setBeerId(props.id);\r\n        setContent(\"\");\r\n        setPoint(0);\r\n        [1, 2, 3, 4, 5].map(i => {document.getElementById(i).src = \"/img/star-regular.png\"});\r\n    }\r\n\r\n    const handleInputClick = async (e) => {\r\n        document.getElementById('input').value = '';\r\n        const request_data = { beerId: beerId, content: content, point: point };\r\n        try {\r\n            let response = await axios({\r\n                method: \"post\",\r\n                url: \"/api/comments/write-comment\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                data: JSON.stringify(request_data),\r\n            }); \r\n            if (response.status >= 200 && response.status < 300) {\r\n                alert(\"댓글 작성이 완료 되었습니다.\");\r\n                navigate(\"/review\", { state: {id: props.id} });\r\n            }\r\n        } catch(err) {\r\n            // alert(err);\r\n            console.log(err);\r\n            resetInput();\r\n        }\r\n    };\r\n\r\n    const goToFetch = (e) => {\r\n        e.preventDefault();\r\n        const nowClicked = e.target.id;\r\n        setStarClick(nowClicked);\r\n        setPoint(nowClicked);\r\n\r\n        if(nowClicked !== null) {\r\n            if(nowClicked > preClicked) {\r\n                for (let i = 1; i <= nowClicked; i++) {\r\n                    const star_id = document.getElementById(i);\r\n                    star_id.src = \"/img/star.png\";\r\n                }\r\n            }\r\n            else if(nowClicked < preClicked){\r\n                for (let i = 1; i <= nowClicked; i++) {\r\n                    const star_id = document.getElementById(i);\r\n                    star_id.src = \"/img/star.png\";\r\n                }\r\n                for(let j = 5; j > nowClicked; j--) {\r\n                    const star_id = document.getElementById(j);\r\n                    star_id.src = \"/img/star-regular.png\";\r\n                }\r\n            }\r\n            else {\r\n                for (let i = 1; i <= nowClicked; i++) {\r\n                    const star_id = document.getElementById(i);\r\n                    star_id.src = \"/img/star-regular.png\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        setPreClicked(starClick);\r\n    });\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.btnContainer}>\r\n                <button className={styles.button}>리뷰 작성</button>\r\n            </div>\r\n            <div className={styles.starContainer}>\r\n                <p className={styles.total}>총점</p>\r\n                <div className={styles.rate}>\r\n                    {[1, 2, 3, 4, 5].map(el => (\r\n                        <img \r\n                            key={el}\r\n                            id={el}\r\n                            className={styles.star} \r\n                            src=\"/img/star-regular.png\"\r\n                            alt=\"\"\r\n                            onClick={goToFetch} />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <div className={styles.footer}>\r\n                <textarea\r\n                    id=\"input\"\r\n                    className={styles.input} \r\n                    type=\"text\" \r\n                    value={content}\r\n                    placeholder=\"맥주 평가글을 입력해주세요.\"\r\n                    onChange={(e) => setContent(e.target.value)}\r\n                />\r\n                <input \r\n                    className={styles.register} \r\n                    type=\"button\" \r\n                    value=\"등록\"\r\n                    onClick={handleInputClick}/>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RateStars;"],"mappings":"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"},"metadata":{},"sourceType":"module"}