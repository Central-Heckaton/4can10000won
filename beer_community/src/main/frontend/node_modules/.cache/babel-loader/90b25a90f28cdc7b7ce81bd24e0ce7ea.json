{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// detailFooter.jsx\nimport React from\"react\";import styles from\"./detailFooter.module.css\";import{useState,useEffect}from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DetailFooter=function DetailFooter(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),count=_useState2[0],setCount=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),like=_useState4[0],setLike=_useState4[1];useEffect(function(){console.log(\"useEffect setlike call\");setLike(props.isLiked);},[props.isLiked]);useEffect(function(){console.log(\"propslike:\",props.isLiked);console.log(\"like:\",like);var putLike=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var request_data,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:request_data={beerId:props.id,state:like};console.log(\"request data: \",request_data);_context.prev=2;_context.next=5;return axios({method:\"post\",url:\"/api/like-beer/\",headers:{\"Content-Type\":\"application/json\"},data:JSON.stringify(request_data)});case 5:response=_context.sent;console.log(\"response: \",response);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);console.log(\"err: \",_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function putLike(){return _ref.apply(this,arguments);};}();if(count>1){putLike();console.log(\"22:\",count);}else{setCount(count+1);console.log(\"11:\",count);}},[like]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(Link,{to:\"/review\",className:styles.link,state:{id:props.id},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.goReview,children:[/*#__PURE__*/_jsx(\"p\",{className:styles.title,children:\"\\uB9AC\\uBDF0\"}),/*#__PURE__*/_jsxs(\"p\",{className:styles.reviewNum,children:[\"(\",props.reviewCount,\")\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.goRate,children:/*#__PURE__*/_jsx(Link,{to:\"/rate\",className:styles.link,state:{id:props.id},children:/*#__PURE__*/_jsx(\"button\",{className:styles.button,children:\"\\uB098\\uB3C4 \\uD3C9\\uAC00\\uD558\\uAE30\"})})}),/*#__PURE__*/_jsx(\"div\",{className:styles.like,children:/*#__PURE__*/_jsx(\"button\",{className:styles.heart,children:/*#__PURE__*/_jsx(\"img\",{className:styles.heartReg,src:like?\"/img/heart-solid.png\":\"/img/heart-regular.png\",alt:\"heart\",onClick:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();console.log(\"click like: \",like);_context2.next=4;return setLike(!like);case 4:console.log(\"after click like : \",like);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}()})})})]});};export default DetailFooter;","map":{"version":3,"names":["React","styles","useState","useEffect","axios","Link","DetailFooter","props","count","setCount","like","setLike","console","log","isLiked","putLike","request_data","beerId","id","state","method","url","headers","data","JSON","stringify","response","container","link","goReview","title","reviewNum","reviewCount","goRate","button","heart","heartReg","e","preventDefault"],"sources":["C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/src/components/detailFooter/detailFooter.jsx"],"sourcesContent":["// detailFooter.jsx\r\nimport React from \"react\";\r\nimport styles from \"./detailFooter.module.css\";\r\nimport { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst DetailFooter = (props) => {\r\n  const [count, setCount] = useState(0);\r\n  const [like, setLike] = useState(\"\");\r\n  useEffect(() => {\r\n    console.log(\"useEffect setlike call\");\r\n    setLike(props.isLiked);\r\n  }, [props.isLiked]);\r\n  useEffect(() => {\r\n    console.log(\"propslike:\", props.isLiked);\r\n    console.log(\"like:\", like);\r\n    const putLike = async () => {\r\n      const request_data = { beerId: props.id, state: like };\r\n      console.log(\"request data: \", request_data);\r\n      try {\r\n        let response = await axios({\r\n          method: \"post\",\r\n          url: \"/api/like-beer/\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          data: JSON.stringify(request_data),\r\n        });\r\n        console.log(\"response: \", response);\r\n      } catch (err) {\r\n        console.log(\"err: \", err);\r\n      }\r\n    };\r\n    if (count > 1) {\r\n      putLike();\r\n      console.log(\"22:\", count);\r\n    } else {\r\n      setCount(count + 1);\r\n      console.log(\"11:\", count);\r\n    }\r\n  }, [like]);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <Link\r\n        to={\"/review\"}\r\n        className={styles.link}\r\n        state={{\r\n          id: props.id,\r\n        }}\r\n      >\r\n        <div className={styles.goReview}>\r\n          <p className={styles.title}>리뷰</p>\r\n          <p className={styles.reviewNum}>({props.reviewCount})</p>\r\n        </div>\r\n      </Link>\r\n      <div className={styles.goRate}>\r\n        <Link\r\n          to={\"/rate\"}\r\n          className={styles.link}\r\n          state={{\r\n            id: props.id,\r\n          }}\r\n        >\r\n          <button className={styles.button}>나도 평가하기</button>\r\n        </Link>\r\n      </div>\r\n      <div className={styles.like}>\r\n        <button className={styles.heart}>\r\n          <img\r\n            className={styles.heartReg}\r\n            src={like ? \"/img/heart-solid.png\" : \"/img/heart-regular.png\"}\r\n            alt=\"heart\"\r\n            onClick={async (e) => {\r\n              e.preventDefault();\r\n              console.log(\"click like: \", like);\r\n              await setLike(!like);\r\n              console.log(\"after click like : \", like);\r\n            }}\r\n          />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DetailFooter;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}