{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState,useEffect}from\"react\";import styles from\"./profileBox.module.css\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProfileBox=function ProfileBox(){var _useState=useState(\"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png\"),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var fileInput=useRef(null);var onChangeImg=function onChangeImg(e){if(e.target.files[0]){// const img=new FormData();\n// img.append(\"file\",e.target.files[0]);\n// axios.post(\"...\",img).then((res)=>{\n// setImage(res.data);\n// }).catch((err)=>{\n// console.error(err)\n// });\nsetImage(e.target.files[0]);}else{return;}var reader=new FileReader();reader.onload=function(){if(reader.readyState===2){setImage(reader.result);}};reader.readAsDataURL(e.target.files[0]);};var handleEditSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var request_data,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();request_data={'username':username,'imageUrl':image};_context.prev=2;_context.next=5;return axios({method:'post',url:'/api/update-user-info',headers:{'Content-Type':\"application/json\"},data:JSON.stringify(request_data)});case 5:response=_context.sent;if(!(response.status>=200&&response.status<300)){_context.next=11;break;}alert(\"정보 수정이 완료되었습니다.\");return _context.abrupt(\"return\");case 11:alert(\"정보 수정에 실패했습니다.\");return _context.abrupt(\"return\");case 13:_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](2);console.log(\"handleEditSubmit/err: \",_context.t0);case 18:;return _context.abrupt(\"return\");case 20:case\"end\":return _context.stop();}}},_callee,null,[[2,15]]);}));return function handleEditSubmit(_x){return _ref.apply(this,arguments);};}();useEffect(function(){axios.get('/api/user').then(function(response){console.log('response.data: ',response.data);setUsername(response.data['username']);});},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleEditSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.mainBox,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.circle,onClick:function onClick(){fileInput.current.click();},children:[/*#__PURE__*/_jsx(\"div\",{className:styles.tinyCircle,children:/*#__PURE__*/_jsx(\"img\",{src:\"./img/pencil.png\",alt:\"edit img\"})}),/*#__PURE__*/_jsx(\"img\",{className:styles.profileImg,src:image,alt:\"img\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:styles.input,accept:\"image/*\",name:\"profileImg\",onChange:onChangeImg,ref:fileInput})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.username,children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:styles.usernameInput,value:username,onChange:function onChange(e){return setUsername(e.target.value);},maxLength:\"8\"}),/*#__PURE__*/_jsx(\"img\",{className:styles.pencil,src:\"./img/greenPencil.png\",alt:\"edit nickname\"})]})}),/*#__PURE__*/_jsx(\"button\",{className:styles.submitButton,type:\"submit\",children:\"\\uC218\\uC815\\uD558\\uAE30\"})]})})});};export default ProfileBox;","map":{"version":3,"names":["React","useRef","useState","useEffect","styles","axios","ProfileBox","image","setImage","username","setUsername","fileInput","onChangeImg","e","target","files","reader","FileReader","onload","readyState","result","readAsDataURL","handleEditSubmit","preventDefault","request_data","method","url","headers","data","JSON","stringify","response","status","alert","console","log","get","then","mainBox","circle","current","click","tinyCircle","profileImg","input","usernameInput","value","pencil","submitButton"],"sources":["C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/src/components/profileBox/ProfileBox.jsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\r\nimport styles from \"./profileBox.module.css\";\r\nimport axios from 'axios';\r\n\r\nconst ProfileBox = () => {\r\n  const [image, setImage] = useState(\r\n    \"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png\"\r\n  );\r\n  const [username, setUsername] = useState(\"\");\r\n  const fileInput = useRef(null);\r\n  const onChangeImg = (e) => {\r\n    if (e.target.files[0]) {\r\n      // const img=new FormData();\r\n      // img.append(\"file\",e.target.files[0]);\r\n      // axios.post(\"...\",img).then((res)=>{\r\n      // setImage(res.data);\r\n      // }).catch((err)=>{\r\n      // console.error(err)\r\n      // });\r\n\r\n      setImage(e.target.files[0]);\r\n    } else {\r\n      return;\r\n    }\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      if (reader.readyState === 2) {\r\n        setImage(reader.result);\r\n      }\r\n    };\r\n    reader.readAsDataURL(e.target.files[0]);\r\n  };\r\n  const handleEditSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const request_data = {'username': username, 'imageUrl': image};\r\n    try{\r\n        let response = await axios({\r\n            method: 'post',\r\n            url: '/api/update-user-info',\r\n            headers: {'Content-Type': \"application/json\"},\r\n            data: JSON.stringify(request_data)\r\n        });\r\n        if(response.status >= 200 && response.status<300){\r\n            alert(\"정보 수정이 완료되었습니다.\");\r\n            return;\r\n        }\r\n        else{\r\n            alert(\"정보 수정에 실패했습니다.\");\r\n            return;\r\n        }\r\n    } catch (err) {\r\n        console.log(\"handleEditSubmit/err: \", err);\r\n    };\r\n    return;\r\n  }\r\n  useEffect(() => {\r\n    axios.get('/api/user')\r\n    .then((response) => {\r\n        console.log('response.data: ', response.data);\r\n        setUsername(response.data['username'])\r\n    })\r\n  }, []);\r\n  return (\r\n    <>\r\n      <form onSubmit={handleEditSubmit}>\r\n        <div className={styles.mainBox}>\r\n          <div\r\n            className={styles.circle}\r\n            onClick={() => {\r\n              fileInput.current.click();\r\n            }}\r\n          >\r\n            <div className={styles.tinyCircle}>\r\n              <img src=\"./img/pencil.png\" alt=\"edit img\" />\r\n            </div>\r\n            <img className={styles.profileImg} src={image} alt=\"img\" />\r\n            <input\r\n              type=\"file\"\r\n              className={styles.input}\r\n              accept=\"image/*\"\r\n              name=\"profileImg\"\r\n              onChange={onChangeImg}\r\n              ref={fileInput}\r\n            />\r\n          </div>\r\n          <div className={styles.username}>\r\n            <label>\r\n              <input\r\n                type=\"text\"\r\n                className={styles.usernameInput}\r\n                value = {username}\r\n                onChange = {(e) => setUsername(e.target.value) }\r\n                maxLength=\"8\"\r\n              />\r\n\r\n              <img\r\n                className={styles.pencil}\r\n                src=\"./img/greenPencil.png\"\r\n                alt=\"edit nickname\"\r\n              />\r\n            </label>\r\n          </div>\r\n            <button className={styles.submitButton} type=\"submit\">\r\n              수정하기\r\n            </button>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProfileBox;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}