{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useEffect}from\"react\";import styles from\"./filterBox.module.css\";import{useState}from\"react\";import axios from\"axios\";import BeerList from\"../beerList/beerList\";// import BeerList from \"../components/beerList/beerList\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FilterBox=function FilterBox(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),beerData=_useState2[0],setBeerData=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),beerName=_useState4[0],setBeerName=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),flag=_useState6[0],setFlag=_useState6[1];var _useState7=useState({passingTags:{Lager:false,Ale:false,IPA:false,Stout:false}}),_useState8=_slicedToArray(_useState7,2),filterState=_useState8[0],setFilterState=_useState8[1];useEffect(function(){console.log(\"Enter UseEffect\");if(flag===0){getBeerList();}else if(flag===1){getSearch();setFlag(0);}},[filterState]);var handleFilter=function handleFilter(e){var beerType=e.target.id;setFilterState({passingTags:_objectSpread(_objectSpread({},filterState.passingTags),{},_defineProperty({},beerType,!filterState.passingTags[beerType]))// 클릭하면 true, false로 바꿔주기\n});// console.log(filterState.passingTags[beerType]);\nif(filterState.passingTags[beerType]===false){var cur=document.getElementById(beerType);cur.style.color=\"white\";cur.style.backgroundColor=\"#FDC74B\";}if(filterState.passingTags[beerType]===true){var _cur=document.getElementById(beerType);_cur.style.color=\"#FDC74B\";_cur.style.backgroundColor=\"white\";}};var filteredCollected=useCallback(function(){var clicked=[];var now=filterState.passingTags;for(var item in now){if(now[item]){// clicked.now = item; -> 현재 클릭된 아이템\nclicked.push(item);}}return clicked;},[filterState.passingTags]);var result=filteredCollected();console.log(result);var getBeerList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var request_data,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"GetBeerList Called\");request_data={beerTypeList:result};// type of -> Object\n_context.next=4;return axios({method:\"post\",url:\"/api/filter\",headers:{\"Content-Type\":\"application/json\"},data:JSON.stringify(request_data)});case 4:response=_context.sent;console.log(\"response: \",response);setBeerData(response.data.data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getBeerList(_x){return _ref.apply(this,arguments);};}();// response.data\n// [{ }, { }, { } ...] -> props로 전달필요\nvar resetColor=function resetColor(){var reset=filterState.passingTags;for(var item in reset){document.getElementById(item).style.color=\"#FDC74B\";document.getElementById(item).style.backgroundColor=\"white\";}};var getSearch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var url,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"beerSearch.jsx/clicked!\");url=\"/api/beername-search/\"+beerName;console.log(\"url: \",url);_context2.next=5;return axios.get(url);case 5:response=_context2.sent;console.log(\"response: \",response);setBeerData(response.data.data);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function getSearch(){return _ref2.apply(this,arguments);};}();var resetState=function resetState(){setFilterState({passingTags:{Lager:false,Ale:false,IPA:false,Stout:false}});};var handleSearchBtnClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();console.log(\"beername: \",beerName);if(!(beerName===\"\"||beerName===undefined)){_context3.next=7;break;}resetColor();resetState();_context3.next=11;break;case 7:_context3.next=9;return setFlag(1);case 9:resetColor();resetState();case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function handleSearchBtnClick(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.searchContainer,children:[/*#__PURE__*/_jsx(\"input\",{name:\"beerName\",className:styles.input,type:\"text\",value:beerName||\"\",onChange:function onChange(e){return setBeerName(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:styles.search,onClick:handleSearchBtnClick,children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/search.png\",alt:\"search img\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(\"button\",{id:\"Lager\",className:styles.box,onClick:handleFilter,children:\"\\uB77C\\uAC70\"}),/*#__PURE__*/_jsx(\"button\",{id:\"Ale\",className:styles.box,onClick:handleFilter,children:\"\\uC5D0\\uC77C\"}),/*#__PURE__*/_jsx(\"button\",{id:\"IPA\",className:styles.box,onClick:handleFilter,children:\"IPA\"}),/*#__PURE__*/_jsx(\"button\",{id:\"Stout\",className:styles.box,onClick:handleFilter,children:\"\\uC2A4\\uD0C0\\uC6B0\\uD2B8\"})]}),/*#__PURE__*/_jsx(BeerList,{data:beerData})]});};export default FilterBox;","map":{"version":3,"names":["React","useCallback","useEffect","styles","useState","axios","BeerList","FilterBox","beerData","setBeerData","beerName","setBeerName","flag","setFlag","passingTags","Lager","Ale","IPA","Stout","filterState","setFilterState","console","log","getBeerList","getSearch","handleFilter","e","beerType","target","id","cur","document","getElementById","style","color","backgroundColor","filteredCollected","clicked","now","item","push","result","request_data","beerTypeList","method","url","headers","data","JSON","stringify","response","resetColor","reset","get","resetState","handleSearchBtnClick","preventDefault","undefined","searchContainer","input","value","search","container","box"],"sources":["C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/src/components/filterBox/filterBox.jsx"],"sourcesContent":["import React, { useCallback, useEffect } from \"react\";\r\nimport styles from \"./filterBox.module.css\";\r\nimport { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport BeerList from \"../beerList/beerList\";\r\n// import BeerList from \"../components/beerList/beerList\";\r\n\r\nconst FilterBox = () => {\r\n  const [beerData, setBeerData] = useState([]);\r\n  const [beerName, setBeerName] = useState();\r\n  const [flag, setFlag] = useState(0);\r\n\r\n  const [filterState, setFilterState] = useState({\r\n    passingTags: {\r\n      Lager: false,\r\n      Ale: false,\r\n      IPA: false,\r\n      Stout: false,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    console.log(\"Enter UseEffect\");\r\n    if (flag === 0) {\r\n      getBeerList();\r\n    } else if (flag === 1) {\r\n      getSearch();\r\n      setFlag(0);\r\n    }\r\n  }, [filterState]);\r\n  const handleFilter = (e) => {\r\n    const beerType = e.target.id;\r\n    setFilterState({\r\n      passingTags: {\r\n        ...filterState.passingTags,\r\n        [beerType]: !filterState.passingTags[beerType],\r\n      }, // 클릭하면 true, false로 바꿔주기\r\n    });\r\n    // console.log(filterState.passingTags[beerType]);\r\n    if (filterState.passingTags[beerType] === false) {\r\n      let cur = document.getElementById(beerType);\r\n      cur.style.color = \"white\";\r\n      cur.style.backgroundColor = \"#FDC74B\";\r\n    }\r\n\r\n    if (filterState.passingTags[beerType] === true) {\r\n      let cur = document.getElementById(beerType);\r\n      cur.style.color = \"#FDC74B\";\r\n      cur.style.backgroundColor = \"white\";\r\n    }\r\n  };\r\n\r\n  const filteredCollected = useCallback(() => {\r\n    const clicked = [];\r\n    const now = filterState.passingTags;\r\n\r\n    for (let item in now) {\r\n      if (now[item]) {\r\n        // clicked.now = item; -> 현재 클릭된 아이템\r\n        clicked.push(item);\r\n      }\r\n    }\r\n\r\n    return clicked;\r\n  }, [filterState.passingTags]);\r\n\r\n  const result = filteredCollected();\r\n  console.log(result);\r\n\r\n  const getBeerList = async (e) => {\r\n    console.log(\"GetBeerList Called\");\r\n    const request_data = { beerTypeList: result }; // type of -> Object\r\n    let response = await axios({\r\n      method: \"post\",\r\n      url: \"/api/filter\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      data: JSON.stringify(request_data),\r\n    });\r\n\r\n    console.log(\"response: \", response);\r\n    setBeerData(response.data.data);\r\n  };\r\n  // response.data\r\n  // [{ }, { }, { } ...] -> props로 전달필요\r\n\r\n  const resetColor = () => {\r\n    const reset = filterState.passingTags;\r\n    for (let item in reset) {\r\n      document.getElementById(item).style.color = \"#FDC74B\";\r\n      document.getElementById(item).style.backgroundColor = \"white\";\r\n    }\r\n  };\r\n\r\n  const getSearch = async () => {\r\n    console.log(\"beerSearch.jsx/clicked!\");\r\n    let url = \"/api/beername-search/\" + beerName;\r\n    console.log(\"url: \", url);\r\n    let response = await axios.get(url);\r\n    console.log(\"response: \", response);\r\n    setBeerData(response.data.data);\r\n  };\r\n  const resetState = () => {\r\n    setFilterState({\r\n      passingTags: {\r\n        Lager: false,\r\n        Ale: false,\r\n        IPA: false,\r\n        Stout: false,\r\n      },\r\n    });\r\n  };\r\n  const handleSearchBtnClick = async (e) => {\r\n    e.preventDefault();\r\n    console.log(\"beername: \", beerName);\r\n    if (beerName === \"\" || beerName === undefined) {\r\n      resetColor();\r\n      resetState();\r\n    } else {\r\n      await setFlag(1);\r\n      resetColor();\r\n      resetState();\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <div className={styles.searchContainer}>\r\n        <input\r\n          name=\"beerName\"\r\n          className={styles.input}\r\n          type=\"text\"\r\n          value={beerName || \"\"}\r\n          onChange={(e) => setBeerName(e.target.value)}\r\n        />\r\n        <button className={styles.search} onClick={handleSearchBtnClick}>\r\n          <img src=\"/img/search.png\" alt=\"search img\" />\r\n        </button>\r\n      </div>\r\n\r\n      <div className={styles.container}>\r\n        <button id=\"Lager\" className={styles.box} onClick={handleFilter}>\r\n          라거\r\n        </button>\r\n        <button id=\"Ale\" className={styles.box} onClick={handleFilter}>\r\n          에일\r\n        </button>\r\n        <button id=\"IPA\" className={styles.box} onClick={handleFilter}>\r\n          IPA\r\n        </button>\r\n        <button id=\"Stout\" className={styles.box} onClick={handleFilter}>\r\n          스타우트\r\n        </button>\r\n      </div>\r\n      <BeerList data={beerData} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FilterBox;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}