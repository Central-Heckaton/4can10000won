{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\seojio\\\\4can1000won_fork\\\\4can10000won\\\\beer_community\\\\src\\\\main\\\\frontend\\\\src\\\\components\\\\rateStars\\\\rateStars.jsx\",\n    _s = $RefreshSig$();\n\n// rateStars.jsx\nimport React from 'react';\nimport styles from './rateStars.module.css';\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RateStars = props => {\n  _s();\n\n  const [starClick, setStarClick] = useState(null);\n  const [preClicked, setPreClicked] = useState(starClick);\n  const [beerId, setBeerId] = useState(props.id);\n  const [content, setContent] = useState(\"\");\n  const [point, setPoint] = useState(0);\n\n  const resetInput = () => {\n    setStarClick(null);\n    setPreClicked(starClick);\n    setBeerId(props.id);\n    setContent(\"\");\n    setPoint(0);\n    [1, 2, 3, 4, 5].map(i => {\n      document.getElementById(i).src = \"/img/star-regular.png\";\n    });\n  };\n\n  const handleInputClick = async e => {\n    document.getElementById('input').value = '';\n    const request_data = {\n      beerId: beerId,\n      content: content,\n      point: point\n    };\n\n    try {\n      let response = await axios({\n        method: \"post\",\n        url: \"/api/comments/write-comment\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        data: JSON.stringify(request_data)\n      });\n\n      if (response.status >= 200 && response.status < 300) {\n        alert(\"댓글 작성이 완료 되었습니다.\");\n        resetInput();\n      }\n    } catch (err) {\n      // alert(err);\n      console.log(err);\n      resetInput();\n    }\n  };\n\n  const goToFetch = e => {\n    e.preventDefault();\n    const nowClicked = e.target.id;\n    setStarClick(nowClicked);\n    setPoint(nowClicked);\n\n    if (nowClicked !== null) {\n      if (nowClicked > preClicked) {\n        for (let i = 1; i <= nowClicked; i++) {\n          const star_id = document.getElementById(i);\n          star_id.src = \"/img/star.png\";\n        }\n      } else if (nowClicked < preClicked) {\n        for (let i = 1; i <= nowClicked; i++) {\n          const star_id = document.getElementById(i);\n          star_id.src = \"/img/star.png\";\n        }\n\n        for (let j = 5; j > nowClicked; j--) {\n          const star_id = document.getElementById(j);\n          star_id.src = \"/img/star-regular.png\";\n        }\n      } else {\n        for (let i = 1; i <= nowClicked; i++) {\n          const star_id = document.getElementById(i);\n          star_id.src = \"/img/star-regular.png\";\n        }\n      }\n    }\n  };\n\n  useEffect(() => {\n    setPreClicked(starClick);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.btnContainer,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.button,\n        children: \"\\uB9AC\\uBDF0 \\uC791\\uC131\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.starContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.total,\n        children: \"\\uCD1D\\uC810\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.rate,\n        children: [1, 2, 3, 4, 5].map(el => /*#__PURE__*/_jsxDEV(\"img\", {\n          id: el,\n          className: styles.star,\n          src: \"/img/star-regular.png\",\n          alt: \"\",\n          onClick: goToFetch\n        }, el, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.footer,\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"input\",\n        className: styles.input,\n        type: \"text\",\n        value: content,\n        placeholder: \"\\uB9E5\\uC8FC \\uD3C9\\uAC00\\uAE00\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n        onChange: e => setContent(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: styles.register,\n        type: \"button\",\n        value: \"\\uB4F1\\uB85D\",\n        onClick: handleInputClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n};\n\n_s(RateStars, \"+szrWdtOpjAhM0XC0gKbqa14zXQ=\");\n\n_c = RateStars;\nexport default RateStars;\n\nvar _c;\n\n$RefreshReg$(_c, \"RateStars\");","map":{"version":3,"names":["React","styles","useState","useEffect","axios","RateStars","props","starClick","setStarClick","preClicked","setPreClicked","beerId","setBeerId","id","content","setContent","point","setPoint","resetInput","map","i","document","getElementById","src","handleInputClick","e","value","request_data","response","method","url","headers","data","JSON","stringify","status","alert","err","console","log","goToFetch","preventDefault","nowClicked","target","star_id","j","container","btnContainer","button","starContainer","total","rate","el","star","footer","input","register"],"sources":["C:/Users/seojio/4can1000won_fork/4can10000won/beer_community/src/main/frontend/src/components/rateStars/rateStars.jsx"],"sourcesContent":["// rateStars.jsx\r\nimport React from 'react';\r\nimport styles from './rateStars.module.css';\r\nimport { useState, useEffect } from 'react';\r\nimport  axios  from 'axios';\r\n\r\nconst RateStars = (props) => {\r\n    const [starClick, setStarClick] = useState(null);\r\n    const [preClicked, setPreClicked] = useState(starClick);\r\n    \r\n    const [beerId, setBeerId] = useState(props.id);\r\n    const [content, setContent] = useState(\"\");\r\n    const [point, setPoint] = useState(0);\r\n\r\n    const resetInput = () => {\r\n        setStarClick(null);\r\n        setPreClicked(starClick);\r\n        setBeerId(props.id);\r\n        setContent(\"\");\r\n        setPoint(0);\r\n        [1, 2, 3, 4, 5].map(i => {document.getElementById(i).src = \"/img/star-regular.png\"});\r\n    }\r\n\r\n    const handleInputClick = async (e) => {\r\n        document.getElementById('input').value = '';\r\n        const request_data = { beerId: beerId, content: content, point: point };\r\n        try {\r\n            let response = await axios({\r\n                method: \"post\",\r\n                url: \"/api/comments/write-comment\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                data: JSON.stringify(request_data),\r\n            }); \r\n            if (response.status >= 200 && response.status < 300) {\r\n                alert(\"댓글 작성이 완료 되었습니다.\");\r\n                resetInput();\r\n            }\r\n        } catch(err) {\r\n            // alert(err);\r\n            console.log(err);\r\n            resetInput();\r\n        }\r\n    };\r\n\r\n    const goToFetch = (e) => {\r\n        e.preventDefault();\r\n        const nowClicked = e.target.id;\r\n        setStarClick(nowClicked);\r\n        setPoint(nowClicked);\r\n\r\n        if(nowClicked !== null) {\r\n            if(nowClicked > preClicked) {\r\n                for (let i = 1; i <= nowClicked; i++) {\r\n                    const star_id = document.getElementById(i);\r\n                    star_id.src = \"/img/star.png\";\r\n                }\r\n            }\r\n            else if(nowClicked < preClicked){\r\n                for (let i = 1; i <= nowClicked; i++) {\r\n                    const star_id = document.getElementById(i);\r\n                    star_id.src = \"/img/star.png\";\r\n                }\r\n                for(let j = 5; j > nowClicked; j--) {\r\n                    const star_id = document.getElementById(j);\r\n                    star_id.src = \"/img/star-regular.png\";\r\n                }\r\n            }\r\n            else {\r\n                for (let i = 1; i <= nowClicked; i++) {\r\n                    const star_id = document.getElementById(i);\r\n                    star_id.src = \"/img/star-regular.png\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        setPreClicked(starClick);\r\n    });\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.btnContainer}>\r\n                <button className={styles.button}>리뷰 작성</button>\r\n            </div>\r\n            <div className={styles.starContainer}>\r\n                <p className={styles.total}>총점</p>\r\n                <div className={styles.rate}>\r\n                    {[1, 2, 3, 4, 5].map(el => (\r\n                        <img \r\n                            key={el}\r\n                            id={el}\r\n                            className={styles.star} \r\n                            src=\"/img/star-regular.png\"\r\n                            alt=\"\"\r\n                            onClick={goToFetch} />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <div className={styles.footer}>\r\n                <textarea\r\n                    id=\"input\"\r\n                    className={styles.input} \r\n                    type=\"text\" \r\n                    value={content}\r\n                    placeholder=\"맥주 평가글을 입력해주세요.\"\r\n                    onChange={(e) => setContent(e.target.value)}\r\n                />\r\n                <input \r\n                    className={styles.register} \r\n                    type=\"button\" \r\n                    value=\"등록\"\r\n                    onClick={handleInputClick}/>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RateStars;"],"mappings":"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"},"metadata":{},"sourceType":"module"}